<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IdM Knowledge Base</title>

    <link rel="stylesheet" href="static/styles.css">

    <link rel="stylesheet" href="static/headerstyles.css">

    <script type="text/javascript" src="static/tables.js"></script>
    <script type="text/javascript" src="static/filters.js"></script>

    <script>
        var loaded = new Array();
        var displayed = new Array();
        var current_main_entity = new String();
    </script>
</head>

<body>

    <header class="nav-header">
        <nav class="nav-container">
            <div class="logo-section">
                <span class="logo-text">IdM KB</span>
            </div>
            
            <div class="nav-links">
                <a href="knowledge_base" class="nav-link" id="homeLink">
                    <span class="icon">üè†</span> Home
                </a>
                <a href="guide" class="nav-link" id="guideLink">
                    <span class="icon">üìö</span> Guide
                </a>
            </div>
        </nav>
    </header>

    <div class="presentation-container">
        <div class="presentation-content">
            <h1 class="presentation-title">Welcome to NDID Knowledge Base</h1>
            
            <div class="presentation-text">
                <p class="highlight-text">
                    üõ°Ô∏è Your Comprehensive Security Intelligence Hub
                </p>
                <p class="main-description">
                    Explore our dynamic threat intelligence database, designed to help you identify, analyze, and understand potential security risks. Our platform provides real-time insights and actionable intelligence for enhanced digital security decision-making.
                </p>
                <div class="feature-highlights">
                    <span class="feature-pill">üîç Smart Filtering</span>
                    <span class="feature-pill">üìä Threat Analysis</span>
                    <span class="feature-pill">üîÑ Real-time Updates</span>
                </div>
            </div>
        </div>
    </div>

    <button class="toggle-filters-btn collapsible" type="button" 
        aria-expanded="false" aria-controls="filters-section" onclick="toggle_filters()">
        Filter Options 
    </button>
    <!-- <button onclick="toggle_filters()">
        Toggle Filters
    </button> -->



    <div id="filters-div" class="filters-div">
        <fieldset>
            <legend>Filters</legend>
            <div>
                <input type="checkbox" name="filter_checkbox" value="People Rights" onchange="" autocomplete="off"/>
                <label>People Rights</label>
            </div>
            <div>
                <input type="checkbox" name="filter_checkbox" value="Laws, Regulations, Compliance" onchange="" autocomplete="off"/>
                <label>Laws, Regulations, Compliance</label>
            </div>
            <div>
                <input type="checkbox" name="filter_checkbox" value="Security" onchange="" autocomplete="off"/>
                <label >Security</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Privacy" onchange="" autocomplete="off"/>
                <label >Privacy</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Trust" onchange="" autocomplete="off"/>
                <label >Trust</label>
            </div>
            <div>
                <input type="checkbox" name="filter_checkbox" value="Confidentiality" onchange="" autocomplete="off"/>
                <label>Confidentiality</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Integrity" onchange="" autocomplete="off"/>
                <label >Integrity</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Availability" onchange="" autocomplete="off"/>
                <label >Availability</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Non-repudiability" onchange="" autocomplete="off"/>
                <label >Non-repudiability</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Authenticity" onchange="" autocomplete="off"/>
                <label >Authenticity</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Authorization" onchange="" autocomplete="off"/>
                <label >Authorization</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Transparency" onchange="" autocomplete="off"/>
                <label >Transparency</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Unlinkability" onchange="" autocomplete="off"/>
                <label >Unlinkability</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Anonymity and Pseudonymity" onchange="" autocomplete="off"/>
                <label >Anonymity and Pseudonymity</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Undetectability and Unobservability" onchange="" autocomplete="off"/>
                <label >Undetectability and Unobservability</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Plausible Deniability" onchange="" autocomplete="off"/>
                <label >Plausible Deniability</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Awareness and Intervenability" onchange="" autocomplete="off"/>
                <label >Awareness and Intervenability</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Compliance" onchange="" autocomplete="off"/>
                <label >Compliance</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Digital Infrastructure Management" onchange="" autocomplete="off"/>
                <label >Digital Infrastructure Management</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Actors and Assets Management" onchange="" autocomplete="off"/>
                <label >Actors and Assets Management</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Trust Establishment" onchange="" autocomplete="off"/>
                <label >Trust Establishment</label>
            </div>
            <div>
                <input type="checkbox"  name="filter_checkbox" value="Trust Management" onchange="" autocomplete="off"/>
                <label >Trust Management</label>
            </div>
        </fieldset>


        <label for="filter_mode">Choose a filtering option:</label>
        <select name="filter_mode" id="filter_mode_select">
            <option value="columns">Columns</option>
            <option value="rows">Rows</option>
        </select>

        <label for="filter_row_value">Choose a row value to filter (only if you have selected Rows as filtering option):</label>
        <select name="filter_row_value" id="filter_row_value_select">
            <option value="T">True</option>
            <option value="F">False</option>
        </select>

        <button id="update_filters_button" onclick="updateFilters()">Update Filters</button>
        <button id="update_filters_button" onclick="resetFilters()">Reset Filters</button>
        <button id="update_filters_button" onclick="selectAllFilters()">Select All Filters</button>
        <button id="update_filters_button" onclick="unselectAllFilters()">Unselect All Filters</button>
        <!-- <button id="update_filters_button" onclick="updateFilters()">Reset Rows</button> -->
        
    </div>

    <script>
        
    </script>
    
    <div class="container table-container">
        <button class="collapsible" id="Goals_collapsible" onclick="toggleContent('Goals')">Open Goals</button>
        <div class="content" id="Goals_content" style="display: none;">
            <div id="Goals_table" class="table-container"></div>
        </div>
    </div>  
    
    <div class="container" class="table-container">
        <button class="collapsible" id="Requirements_collapsible" onclick="toggleContent('Requirements')">Open Requirements</button>
        <div class="content" id="Requirements_content" style="display: none;">
            <div id="Requirements_table" class="table-container styled-table"></div>
        </div>
    </div>

    <div class="container" class="table-container">
        <button class="collapsible" id="Mitigations_collapsible" onclick="toggleContent('Mitigations')">Open Mitigations</button>
        <div class="content" id="Mitigations_content" style="display: none;">
            <div id="Mitigations_table" class="table-container"></div>
        </div>
    </div>

    <div class="container" class="table-container">
        <button class="collapsible" id="Threats_collapsible" onclick="toggleContent('Threats')">Open Threats</button>
        <div class="content" id="Threats_content" style="display: none;">
            <div id="Threats_table" class="table-container"></div>
        </div>
    </div>

    <div class="container" class="table-container">
        <button class="collapsible" id="Issues_collapsible" onclick="toggleContent('Issues')">Open Issues</button>
        <div class="content" id="Issues_content" style="display: none;">
            <div id="Issues_table" class="table-container"></div>
        </div>
    </div>

    <div class="container" class="table-container">
        <button class="collapsible" id="Limitations_collapsible" onclick="toggleContent('Limitations')">Open Limitations</button>
        <div class="content" id="Limitations_content" style="display: none;">
            <div id="Limitations_table" class="table-container"></div>
        </div>
    </div>

    <div class="container" class="table-container"></div>
        <button class="collapsible" id="Attacks_collapsible" onclick="toggleContent('Attacks')">Open Attacks</button>
        <div class="content" id="Attacks_content" style="display: none;">
            <div id="Attacks_table" class="table-container"></div>
        </div>
    </div>

    <div class="container" class="table-container"></div>
        <button class="collapsible" id="Limitations_collapsible" onclick="toggleContent('Vulnerabilities')">Open Vulnerabilities</button>
        <div class="content" id="Vulnerabilities_content" style="display: none;">
            <div id="Vulnerabilities_table" class="table-container"></div>
        </div>
    </div>


    <button class="generate-threats-btn collapsible" 
        aria-label="Generate security threats list"
        data-loading-text="Generating..."
        onclick="generate_threats()">
    Generate Threats
    </button>

    <script>
        function toggleContent(entity) {
            var content = document.getElementById(entity+"_content");
            var button = document.getElementById(entity+"_collapsible");

            if (content.style.display === "block") {
                content.style.display = "none";
                button.innerText = "Open " + entity;
                array_remove(displayed, entity);
            } else {
                if(loaded.indexOf(entity) == -1){ //load only if it hasn't been loaded before lol
                    loadTable(entity);
                }
                else{
                    // resetRows();
                }
                content.style.display = "block";
                button.innerText = "Close " + entity;
                displayed.push(entity);
            }
        }
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get current page path
            const currentPath = window.location.pathname;
            
            // Set active class based on current page
            if (currentPath.includes('guide')) {
                document.getElementById('guideLink').classList.add('active');
            } else {
                document.getElementById('homeLink').classList.add('active');
            }
        });
    </script>

</body>
</html>
